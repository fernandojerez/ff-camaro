use: base_camaro

configurations:
   compileOnly: [ java_libs, jetty, undertow ]
   jetty: [ ]
   undertow: [ ]
   java_libs: [ ]
   java: [  ]
   js: [  ]
   dart: [  ]
   python: [ ]
   macros: [ ]
   base_test: [ ]
   java_test: [ java, java_libs, base_test, jetty, undertow ]
   js_test: [ js, base_test ]
   dart_test: [ dart, base_test ]
   python_test: [ python, base_test ]
   macros_test: [ macros, base_test ]
   
dependencies:
   dart:
      - "ff:charger:+:dart"
   python:
      - "ff:charger:+:python"
   js:
      - "ff:charger:+:js"
   java_libs:
      - "com.squareup.okhttp3:okhttp:3.14.9;none"
      - "ff.java:charger:+;default"
      - "ff:charger:+;java_libs"
      - "ff:crl:+;default"
   java:      
      - "ff:charger:+:java"      
   implementation:
      - "ff:charger:+:java"
      - "ff:crl:+"
      - "ff.java:charger:+"
      - "ff.dart:charger:+"
      - "ff.js:charger:+"
      - "ff.python:charger:+"
   macros:
      - "ff:charger:+"
      - "ff:charger:+:java"
      - "ff:charger:+;java_libs"
      - "ff.java:charger:+"
   testImplementation:
      - "ff.js:charger:+"
      - "ff.java:charger:+" 
      - "ff.dart:charger:+"
      - "ff.python:charger:+"
   base_test:
      - "ff:crl:+;default"
      - "org.junit.jupiter:junit-jupiter-api:5.6.2"
      - "org.junit.jupiter:junit-jupiter-params:5.6.2"
      - "org.junit.jupiter:junit-jupiter-engine:5.6.2"
      - "ff.js:charger:+"
      - "ff.java:charger:+" 
      - "ff.dart:charger:+"
      - "ff.python:charger:+"
   js_test:
      - "org.seleniumhq.selenium:selenium-java:3.141.59;default"
      - "org.seleniumhq.selenium:selenium-chrome-driver:3.141.59;default"

sources:
   ff: { test: true }
   macros: { test: false }
   interfaces/js: { test: false }
   interfaces/dart: { test: false }
   interfaces/python: { test: false }
   interfaces/java: { test: false }
   resources: { test: false }

eclipse:
   ff: { test: true, output: true }
   macros: { test: false, output: false }
   resources: { test: false, output: true }
   interfaces/java: { test: false, output: true }
   interfaces/js: { test: false, output: true }
   interfaces/dart: { test: false, output: true }
   interfaces/python: { test: false, output: true }
  
eclipse_build: [ ff_java ]
   
tasks: 
   ff_macros_compile:
      use: ff_macros_compile
      source: macros
      configuration: [ macros, java_libs ]
      interfaces: interfaces/java
   ff_js_compile:
      use: ff_js_compile
      output: ff_js
      source: ff
      configuration: js
      interfaces: interfaces/js
   ff_js_test_compile:
      use: ff_js_compile
      source: ff
      output: ff_js
      test: true
      interfaces: interfaces/js
      configuration: [ js, js_test ]
   ff_dart_compile:
      use: ff_dart_compile
      output: ff_dart
      source: ff
      configuration: dart
      interfaces: interfaces/dart
   ff_dart_test_compile:
      use: ff_dart_compile
      source: ff
      output: ff_dart
      compilation_type: APPLICATION
      test: true
      interfaces: interfaces/dart
      configuration: [ dart, dart_test ]      
   ff_python_compile:
      use: ff_python_compile
      output: ff_python
      source: ff
      configuration: python
      interfaces: interfaces/python
   ff_python_test_compile:
      use: ff_python_compile
      source: ff
      output: ff_python
      compilation_type: APPLICATION
      test: true
      interfaces: interfaces/python
      configuration: [ python, python_test ]
   ff_java_compile:
      use: ff_compile
      source: ff
      output: ff_java
      configuration: [ java, java_libs ]
   ff_java_test_compile:
      use: ff_compile
      source: ff
      output: ff_java
      test: true
      interfaces: interfaces/java
      configuration: [ java, java_test ]
   java_jar:
      class: $Jar
      group: ff
      description: Generate Java FF jar
      classifier: java
      extension: jar
      from:
         resources:
            include: [ "**/*" ]
         ff_java:
            type: output
            include: [ "**/*.class" ]
         interfaces/java:
            type: output
            include: [ "**/*.class", "**/*" ]
            exclude: [ "**/*.java" ]
   js_jar:
      class: $Jar
      group: ff
      description: Generate Javascript FF jar
      classifier: js
      extension: jar
      from:
         js:
            include: [ "**/*.js" ]
         resources:
            include: [ "**/*" ]
         ff_js:
            type: output
            include: [ "**/*.class", "**/*.js" ]
         interfaces/js:
            type: output
            include: [ "**/*.class", "**/*" ]
            exclude: [ "**/*.java" ]
   dart_jar:
      class: $Jar
      group: ff
      description: Generate Dart FF jar
      classifier: dart
      extension: jar
      from:
         resources:
            include: [ "**/*" ]
         ff_dart:
            type: output
            include: [ "**/*.class", "**/*.dart" ]
         interfaces/dart:
            type: output
            include: [ "**/*.class", "**/*.dart" ]
            exclude: [ "**/*.java" ]
   python_jar:
      class: $Jar
      group: ff
      description: Generate Python FF jar
      classifier: python
      extension: jar
      from:
         resources:
            include: [ "**/*" ]
         ff_python:
            type: output
            include: [ "**/*.class", "**/*.py" ]
         interfaces/python:
            type: output
            include: [ "**/*.class", "**/*.py" ]
            exclude: [ "**/*.java" ]
   macros_jar:
       class: $Jar
       group: ff
       description: Generate Macros FF jar
       extension: jar
       from:
          macros:
             type: output
             include: [ "**/*.class" ]
   ff_java_test:
      class: $Test
      group: ff
      description: Execute Java Test
      lang: java
      depends: ["ff_java_test_compile"]
   ff_js_test:
      depends: [ "ff_js_chrome_test", "ff_js_firefox_test", "ff_js_edge_test"]
      log-end: "Js Test executed"
   ff_js_chrome_test:
      class: $Test
      group: ff
      description: Execute Chrome Js Test
      lang: js
      browser: chrome
      depends: ["ff_js_test_compile"]
   ff_js_firefox_test:
      class: $Test
      group: ff
      description: Execute Firefox Js Test
      lang: js
      browser: firefox
      depends: ["ff_js_test_compile"]
   ff_js_edge_test:
      class: $Test
      group: ff
      description: Execute Edge Js Test
      lang: js
      browser: edge
      depends: ["ff_js_test_compile"]
   ff_dart_test:
      class: $Test
      group: ff
      description: Execute Dart Test
      lang: dart
      depends: ["ff_dart_test_compile"]
   ff_python_test:
      class: $Test
      group: ff
      description: Execute Python Test
      lang: python
      depends: ["ff_python_test_compile"]
   ff_publish:
      group: ff
      description: Build and Publish the artifact
      depends: [ publish ]
      log-end: App build and uploaded
   ff_compile:
      depends: [ "ff_java_compile", "ff_js_compile", "ff_dart_compile", "ff_python_compile"]
      log-end: "Source compiled"
   ff_jar:
      depends: ["jar", "js_jar", "java_jar", "dart_jar", "python_jar"]
      log-end: "Jar generated"
   ff_test:
      depends: [ "ff_java_test", "ff_js_test", "ff_dart_test", "ff_python_test"]
      log-end: "Test executed"
   show_ff_python_test_report:
      class: $Browse
      group: report
      description: Python Test Report
      uri: file://$build_dir$/reports/tests/ff_python_test/index.html
   show_ff_dart_test_report:
      class: $Browse
      group: report
      description: Dart Test Report
      uri: file://$build_dir$/reports/tests/ff_dart_test/index.html
   show_ff_java_test_report:
      class: $Browse
      group: report
      description: Java Test Report
      uri: file://$build_dir$/reports/tests/ff_java_test/index.html      
   show_ff_js_chrome_test_report:
      class: $Browse
      group: report
      description: Js Test Report
      uri: file://$build_dir$/reports/tests/ff_js_chrome_test/index.html
   show_ff_js_firefox_test_report:
      class: $Browse
      group: report
      description: Js Test Report
      uri: file://$build_dir$/reports/tests/ff_js_firefox_test/index.html
   show_ff_js_edge_test_report:
      class: $Browse
      group: report
      description: Js Test Report
      uri: file://$build_dir$/reports/tests/ff_js_edge_test/index.html
   show_ff_js_test_report:
      depends: [ "show_ff_js_chrome_test_report", "show_ff_js_firefox_test_report", "show_ff_js_edge_test_report" ]
      log-end: "Test executed"
   show_ff_coverage_report:
      class: $Browse
      group: report
      description: Coverage Test Report
      uri: file://$build_dir$/reports/jacoco/html/index.html
                     
facets: [ $clear, multi ]

artifacts: 
   - $clear
   - $task macros_jar;macros
   - $task java_jar;java
   - $task js_jar;js
   - $task dart_jar;dart
   - $task python_jar;python

